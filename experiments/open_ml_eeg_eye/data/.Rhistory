library(magrittr)
set.seed(1231)
data = read.csv("data.csv")
data[,1:14] = scale(data[,1:14])
data[,15] = data[,15] - 1
data = data[sample(1:nrow(data)),]
7500/5
library(magrittr)
set.seed(1231)
data = read.csv("data.csv")
data[,1:14] = scale(data[,1:14])
data[,15] = data[,15] - 1
data = data[sample(1:nrow(data)),]
## eye data
# categorical, balanced
# 15K
reference = data[1:7500,1:14] %>% as.matrix()
reference_y = data[1:7500,15]
spl = split(7501:nrow(data),1:5)
## variable size of hospitals
for(i in 1:2){
size = runif(1,100,400) %>% round()
who = sample(spl[[i]],size = size)
spl[[i]] = setdiff(spl[[i]],who)
spl[[i+2]] = c(spl[[i+2]],who) %>% sample ## add to enemy
}
hospitals = list()
for(i in 1:length(spl)){
hospitals[[i]] = list()
hospitals[[i]]$x = data[spl[[i]],1:14] %>% as.matrix()
hospitals[[i]]$y = data[spl[[i]],15] %>% as.character() %>% as.numeric()
}
names(hospitals) = paste0("hospital_",1:length(spl))
library(magrittr)
set.seed(1231)
data = read.csv("data.csv")
data[,1:14] = scale(data[,1:14])
data[,15] = data[,15] - 1
data = data[sample(1:nrow(data)),]
## eye data
# categorical, balanced
# 15K
reference = data[1:7500,1:14] %>% as.matrix()
reference_y = data[1:7500,15]
spl = split(7501:nrow(data),1:5)
## variable size of hospitals
for(i in 1:2){
size = runif(1,100,400) %>% round()
who = sample(spl[[i]],size = size)
spl[[i]] = setdiff(spl[[i]],who)
spl[[i+2]] = c(spl[[i+2]],who) %>% sample ## add to enemy
}
hospitals = list()
for(i in 1:length(spl)){
hospitals[[i]] = list()
hospitals[[i]]$x = data[spl[[i]],1:14] %>% as.matrix()
hospitals[[i]]$y = data[spl[[i]],15] %>% as.character() %>% as.numeric()
}
names(hospitals) = paste0("hospital_",1:length(spl))
hospitals$reference = reference
hospitals$reference_y = reference_y
dim(hospitals$hospital_1$x)
dim(hospitals$hospital_1$Y)
dim(hospitals$hospital_1$y)
length(hospitals$hospital_1$y)
dim(hospitals$hospital_2$x)
dim(hospitals$hospital_3$x)
dim(hospitals$hospital_4$x)
dim(hospitals$hospital_5$x)
library(magrittr)
set.seed(1231)
data = read.csv("data.csv")
data[,1:14] = scale(data[,1:14])
data[,15] = data[,15] - 1
data = data[sample(1:nrow(data)),]
## eye data
# categorical, balanced
# 15K
reference = data[1:7500,1:14] %>% as.matrix()
reference_y = data[1:7500,15]
spl = split(7501:nrow(data),1:5)
## variable size of hospitals
for(i in 1:2){
size = runif(1,100,400) %>% round()
who = sample(spl[[i]],size = size)
spl[[i]] = setdiff(spl[[i]],who)
spl[[i+2]] = c(spl[[i+2]],who) %>% sample ## add to enemy
}
hospitals = list()
for(i in 1:length(spl)){
hospitals[[i]] = list()
tmp_ind = sample(spl[[i]],size = length(spl[[i]])*0.66)
hospitals[[i]]$x = data[tmp_ind,1:14] %>% as.matrix()
hospitals[[i]]$y = data[tmp_ind,15] %>% as.character() %>% as.numeric()
hospitals[[i]]$test_x = data[-tmp_ind,1:14] %>% as.matrix()
hospitals[[i]]$test_y = data[-tmp_ind,15] %>% as.character() %>% as.numeric()
}
names(hospitals) = paste0("hospital_",1:length(spl))
hospitals$reference = reference
hospitals$reference_y = reference_y
setwd("~/Desktop/marko_paper/FederatedLearningViaCoTraining/experiments/open_ml_eeg_eye/data")
source('~/Desktop/marko_paper/FederatedLearningViaCoTraining/experiments/open_ml_eeg_eye/data/prepare_data.R')
source('~/Desktop/marko_paper/FederatedLearningViaCoTraining/experiments/open_ml_eeg_eye/data/prepare_data.R')
1/6*15000
source('~/Desktop/marko_paper/FederatedLearningViaCoTraining/experiments/open_ml_eeg_eye/data/prepare_data.R')
hospitals$hospital_1$x
%>% dim
hospitals$hospital_1$x %>% dim
hospitals$hospital_1$test_x %>% dim
test_ind = setdiff(spl[[i]],tmp_ind)
test_ind
source('~/Desktop/marko_paper/FederatedLearningViaCoTraining/experiments/open_ml_eeg_eye/data/prepare_data.R')
